// Copyright (C) 2024 - The Spurte Authors
// 
// The code provided, as well as usage of this code is licensed under the MIT License
//
// For more information, check the LICENSE file at the root of this project, or check https://github.com/nikeokoronkwo/spurte for more information

/// The configuration options for the Spurte Dart implementation.
/// 
/// This extends the common options, with implementation-specific options.
module SpurteDartOptions

extends "common.pkl"

import "common.pkl"

class SpurteDartBuildOptions extends SpurteBuildOptions {
    /// Whether to bundle the project with JS
    /// 
    /// Defaults to `true`
    bundleAsJs: Boolean?
}

class SpurteDartExperimentalOptions extends SpurteExperimentalOptions {
    /// Whether to add types to the bundled JS files
    /// 
    /// This option defaults to `false`, but if `bundleAsJs` is provided as `false`, this option is ignored.
    /// 
    /// > **NOTE**: This option is experimental, and doesn't work at the moment
    bundleWithTypes: Boolean?
}

class SpurteJSDartOptions extends SpurteJSSharedOptions {
    /// Whether typescript is being used in this project
    typescript: Boolean?

    /// Whether JSX is being used in this project
    jsx: Boolean?

    /// Whether deno is used in the given project
    ///
    /// If not defined, this can be inferred through the use of a `deno.json` file in the project
    deno: Boolean?
}

/// The main entrypoint of the application
entry: String? = "web/main.dart"

/// The path to the pubspec file used for dart configuration. Defaults to the project root
pubspec: String?


build: SpurteDartBuildOptions? = new SpurteDartBuildOptions {
    outdir = "dist"
    minify = true
    bundleAsJs = true
}


experimental: SpurteDartExperimentalOptions = new SpurteDartExperimentalOptions {
    bundleWithTypes = false
}


/// Options used for configuring the use of JavaScript projects and dependencies in the Spurte Project
js: SpurteJSDartOptions?